<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style-minimal.css" />
  <title>SMK Data Visualized</title>
</head>

<body>
  <!-- Sticky Navigation -->
  <nav id="stickyNav" class="sticky-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-container">
      <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      <div class="nav-links" id="navLinks">
        <a href="#timeline">Timeline</a>
        <a href="#acquisition">Acquisition</a>
        <a href="#distribution">Distribution</a>
        <a href="#nationality">Nationality</a>
        <a href="#objectstechniquesmaterials">Objects, Techniques & Materials</a>
        <a href="#creatordepicted">Who Depicts Whom</a>
        <a href="#exhibitions">Exhibitions</a>
        <a href="#display">On display</a>
        <a href="#dimensions">Dimensions</a>
      </div>
    </div>
  </nav>

  <!-- Back to Top Button -->
  <button id="backToTop" class="back-to-top" aria-label="Back to top" title="Back to top">
    ↑
  </button>

  <!-- Storage Consent Banner -->
  <div id="consentBanner" class="consent-banner" style="display:none;" role="dialog" aria-labelledby="consentTitle" aria-describedby="consentDesc">
    <div class="consent-content">
      <h3 id="consentTitle">Data Storage</h3>
      <p id="consentDesc">This site uses local browser storage (IndexedDB) to cache publicly available museum data for improved performance. No personal information is collected or tracked.</p>
      <div class="consent-buttons">
        <button id="consentAccept" class="consent-btn accept" aria-label="Accept data storage">Accept</button>
        <button id="consentDecline" class="consent-btn decline" aria-label="Decline data storage">Decline</button>
      </div>
      <p class="consent-note">You can change this preference anytime using the "Refresh Data" button.</p>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="hero-section" aria-labelledby="hero-heading">
    <div class="hero-background" style="background-image: url('img/hero-img2.jpg');"></div>
    <div class="hero-content">
      <h1 id="hero-heading">SMK Data Visualized</h1>
      <p>How is gender represented across the SMK collection? Using the SMK API, we explore how gender is expressed
        in the museum's acquisition history, objects, materials and techniques,
        subjects, exhibition practices, physical characteristics of artworks, and much more.</p>
      <div id="loading" role="status" aria-live="polite" aria-atomic="true">Loading SMK data...</div>
      <div id="cacheStatus" class="cache-status" style="display:none;">
        <div id="cacheInfo" class="cache-info"></div>
        <button id="refreshButton" class="refresh-button" title="Fetch latest data from API">Refresh Data</button>
      </div>
    </div>
  </section>

  <main role="main">
    <section class="section-methodology" aria-labelledby="methodology-heading">
      <details>
        <summary id="methodology-heading"><strong>Methodology & Data Limitations</strong> (click to expand)</summary>
        <div class="methodology-content">
          <h3>Creator</h3>
          <p>Victor Nordquist</p>

          <h3>Data Source</h3>
          <p>All data is fetched from the <a href="https://www.smk.dk/article/smk-api/" target="_blank"
              rel="noopener">SMK API</a>.
            This analysis includes only artworks with recorded acquisition dates.</p>

          <h3>Gender Classification</h3>
          <p><strong>How gender is determined:</strong> Gender is based on the <code>creator_gender</code> field in the
            SMK API, which reflects the museum's cataloguing. Values are normalized to "Male", "Female", or "Unknown".
          </p>

          <h3>Key Assumptions</h3>
          <ul>
            <li><strong>One creator per work:</strong> Only the primary creator's gender is analyzed. Collaborative
              works are attributed to the first listed creator.</li>
            <li><strong>Acquisition date = museum interest:</strong> We use acquisition dates as a proxy for
              institutional collecting priorities, though donations and bequests may not reflect active curatorial
              choices.</li>
            <li><strong>Current API snapshot:</strong> Display status and exhibition counts reflect the current state of
              the database, not historical patterns.</li>
          </ul>

          <h3>Statistical Notes</h3>
          <ul>
            <li><strong>No significance testing:</strong> This is exploratory data analysis. Observed differences are
              not tested for statistical significance.</li>
            <li><strong>Sample sizes (n=) are shown</strong> throughout to help assess reliability of percentages.</li>
            <li><strong>Percentages on small samples</strong> should be interpreted with caution.</li>
          </ul>

          <h3>Data Anomalies</h3>
          <ul>
            <li><strong>Peaks in 1787 and 1887:</strong> The museum's database was established in 1887. Artworks with
              unknown acquisition dates were recorded as acquired "before 1887." In a later database version, this was
              interpreted as a 100-year interval (1787-1887). The data extraction process assigns these to specific
              years (1787 or 1887), creating artificial peaks. These represent artworks acquired before 1887 where the
              exact year is unknown.</li>
          </ul>
        </div>
      </details>
    </section>

    <section id="statsContainer" class="section-overview" aria-labelledby="stats-heading">
      <h2 id="stats-heading">Collection Overview</h2>
      <div class="stats-grid" id="statsGrid" role="list">
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Total artworks</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Works by male artists</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Works by female artists</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Gender Data Complete</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Works by male artists (2000-2025)</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Works by female artists (2000-2025)</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Works by female artists on display</div>
          <div class="stat-subtext">Loading...</div>
        </div>
        <div class="stat-card">
          <div class="stat-value stat-loading">—</div>
          <div class="stat-label">Works by male artists on display</div>
          <div class="stat-subtext">Loading...</div>
        </div>
      </div>
    </section>

    <section class="section-timeline" aria-labelledby="timeline-heading">
      <div id="timeline" class="section-anchor"></div>
      <h2 id="timeline-heading">Acquisitions by Gender Over Time</h2>

      <!-- Tab Navigation -->
      <div class="tab-container" role="tablist">
        <button class="tab-button active" data-tab="allYears" role="tab" aria-selected="true"
          aria-controls="allYears-panel">All Years</button>
        <button class="tab-button" data-tab="recent" role="tab" aria-selected="false"
          aria-controls="recent-panel">2000–2025</button>
      </div>

      <!-- All Years Tab Content -->
      <div id="allYears-panel" class="tab-panel active" role="tabpanel" aria-labelledby="allYears">
        <div id="timelineInsight" class="insight-box" style="display:none;" role="complementary"></div>
        <div id="charts">
          <div class="chart-container">
            <h3>Women</h3>
            <canvas id="femaleChart" height="400" role="img"
              aria-label="Line chart showing acquisitions of artworks by female artists over time"></canvas>
          </div>
          <div class="chart-container">
            <h3>Men</h3>
            <canvas id="maleChart" height="400" role="img"
              aria-label="Line chart showing acquisitions of artworks by male artists over time"></canvas>
          </div>
          <div class="chart-container">
            <h3>Unknown</h3>
            <canvas id="unknownChart" height="400" role="img"
              aria-label="Line chart showing acquisitions of artworks with unknown gender attribution over time"></canvas>
          </div>
        </div>
      </div>

      <!-- Recent Years Tab Content -->
      <div id="recent-panel" class="tab-panel" role="tabpanel" aria-labelledby="recent">
        <div id="recentInsight" class="insight-box" style="display:none;" role="complementary"></div>
        <div id="charts2000">
          <div class="chart-container">
            <h3>Women</h3>
            <canvas id="femaleChart2000" height="400" role="img"
              aria-label="Line chart showing recent acquisitions of artworks by female artists from 2000 to 2025"></canvas>
          </div>
          <div class="chart-container">
            <h3>Men</h3>
            <canvas id="maleChart2000" height="400" role="img"
              aria-label="Line chart showing recent acquisitions of artworks by male artists from 2000 to 2025"></canvas>
          </div>
          <div class="chart-container">
            <h3>Unknown</h3>
            <canvas id="unknownChart2000" height="400" role="img"
              aria-label="Line chart showing recent acquisitions of artworks with unknown gender attribution from 2000 to 2025"></canvas>
          </div>
        </div>
      </div>
    </section>

    <div id="femaleSurpass" role="complementary"></div>

    <section class="section-acquisition" aria-labelledby="acquisition-lag-heading">
      <div id="acquisition" class="section-anchor"></div>
      <div id="acquisitionLagContainer">
        <h2 id="acquisition-lag-heading">Acquisition Lag: Historical vs Contemporary Collecting</h2>
        <div class="insight-box">
          <p>How long after creation are works acquired? This analysis examines the time gap between
          when a work was produced and when it entered the collection. A shorter lag suggests contemporary collecting
          (acquiring works from living or recently deceased artists), while longer lags indicate historical collecting
          (old masters). This can reveal whether female artists are more likely to be collected during their lifetimes
          or posthumously rediscovered.</p>
        </div>

        <h3>Acquisition Lag Statistics</h3>
        <canvas id="acquisitionLagChart" height="300" role="img"
          aria-label="Grouped bar chart comparing average and median acquisition lag by gender"></canvas>

        <h3>Lag Distribution (Years between production and acquisition)</h3>
        <div class="insight-box">
          <p>This chart shows the percentage of works in each lag category by gender. It reveals
          whether works by one gender are more likely to be acquired contemporaneously or after centuries.</p>
        </div>
        <canvas id="lagDistributionChart" height="350" role="img"
          aria-label="Line chart showing distribution of acquisition lag by gender"></canvas>
      </div>
      <div id="acquisitionLagInsight" class="insight-box" style="display:none;" role="complementary"></div>
    </section>

    <section class="section-distribution" aria-labelledby="distribution-heading">
      <div id="distribution" class="section-anchor"></div>
      <h2 id="distribution-heading">Gender Distribution in the Collection</h2>

      <!-- Tab Navigation -->
      <div class="tab-container" role="tablist">
        <button class="tab-button active" data-tab="distAllYears" role="tab" aria-selected="true"
          aria-controls="distAllYears-panel">All Years</button>
        <button class="tab-button" data-tab="distRecent" role="tab" aria-selected="false"
          aria-controls="distRecent-panel">2000–2025</button>
      </div>

      <!-- All Years Tab Content -->
      <div id="distAllYears-panel" class="tab-panel active" role="tabpanel" aria-labelledby="distAllYears">
        <div id="pieChartContainer">
          <div id="pieContainer">
            <canvas id="genderPie" height="300" role="img"
              aria-label="Pie chart showing overall gender distribution in the collection"></canvas>
          </div>
        </div>
      </div>

      <!-- Recent Years Tab Content -->
      <div id="distRecent-panel" class="tab-panel" role="tabpanel" aria-labelledby="distRecent">
        <div id="pieChartContainer">
          <div id="pieContainer2000">
            <canvas id="genderPie2000" height="300" role="img"
              aria-label="Pie chart showing gender distribution for acquisitions from 2000 to 2025"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section aria-labelledby="female-trend-heading">
      <div id="femaleTrendContainer">
        <h2 id="female-trend-heading">Female Representation Trend (2000–2025)</h2>
        <div class="insight-box">
          <p>This chart tracks the percentage of female artists among annual acquisitions from 2000 to
          2025. The horizontal line shows the overall collection average for comparison, revealing whether recent
          acquisitions are improving gender balance.</p>
        </div>
        <canvas id="femaleTrendChart" height="350" role="img"
          aria-label="Line chart showing female artist percentage by year with collection average reference line"></canvas>
      </div>
      <div id="femaleTrendInsight" class="insight-box" style="display:none;" role="complementary"></div>
    </section>

    <section aria-labelledby="distribution-timeline-heading">
      <div id="genderDistributionTimelineContainer">
        <h2 id="distribution-timeline-heading">Gender distribution over time</h2>
        <div class="insight-box">
          <p>This chart shows how the gender representation has evolved year by year, revealing trends
          in acquisition patterns over time.</p>
        </div>
        <canvas id="genderDistributionTimeline" height="400" role="img"
          aria-label="Stacked area chart showing gender distribution percentages over time"></canvas>
      </div>
    </section>

    <section class="section-map section-categories" aria-labelledby="nationality-section-heading">
      <div id="nationality" class="section-anchor"></div>
      <h2 id="nationality-section-heading">Nationality & Geographic Distribution</h2>

      <div id="worldMapContainer">
        <h3 id="map-heading">Geographic Distribution of Artists by Gender</h3>
        <div class="insight-box">
          <p>This map shows the geographic origins of artists in the SMK collection. Countries are
          colored by the dominant gender representation, with color intensity indicating the total number of artworks.
          Hover over countries to see detailed breakdowns.</p>
        </div>

        <!-- Gender filter buttons -->
        <div class="map-controls">
          <button class="map-filter-btn active" data-filter="all">All</button>
          <button class="map-filter-btn" data-filter="female">Female</button>
          <button class="map-filter-btn" data-filter="male">Male</button>
        </div>

        <div id="worldMap" role="img" aria-label="World map showing geographic distribution of artists by gender"></div>
        <div id="mapTooltip" class="map-tooltip"></div>
        <div id="mapLegend" class="map-legend"></div>
      </div>

      <h3 id="nationality-heading">Top Nationalities by Gender</h3>

      <!-- Tab Navigation -->
      <div class="tab-container" role="tablist">
        <button class="tab-button active" data-tab="natAllYears" role="tab" aria-selected="true"
          aria-controls="natAllYears-panel">All Years</button>
        <button class="tab-button" data-tab="natRecent" role="tab" aria-selected="false"
          aria-controls="natRecent-panel">2000–2025</button>
      </div>

      <!-- All Years Tab Content -->
      <div id="natAllYears-panel" class="tab-panel active" role="tabpanel" aria-labelledby="natAllYears">
        <div id="nationalityContainer">
          <h3>Absolute counts</h3>
          <canvas id="nationalityChart" height="400" role="img"
            aria-label="Horizontal bar chart showing top nationalities by gender across all years"></canvas>
          <h3>Gender distribution within each nationality (%)</h3>
          <canvas id="nationalityChartPercent" height="400" role="img"
            aria-label="100% stacked horizontal bar chart showing gender percentages within each nationality"></canvas>
        </div>
      </div>

      <!-- Recent Years Tab Content -->
      <div id="natRecent-panel" class="tab-panel" role="tabpanel" aria-labelledby="natRecent">
        <div id="nationalityContainer2000">
          <h3>Absolute counts (2000–2025)</h3>
          <canvas id="nationalityChart2000" height="400" role="img"
            aria-label="Horizontal bar chart showing top nationalities by gender from 2000 to 2025"></canvas>
          <h3>Gender distribution within each nationality (%) (2000–2025)</h3>
          <canvas id="nationalityChartPercent2000" height="400" role="img"
            aria-label="100% stacked horizontal bar chart showing gender percentages within each nationality from 2000 to 2025"></canvas>
        </div>
      </div>
    </section>

    <section class="section-categories" aria-labelledby="object-materials-techniques-heading">
      <div id="objectstechniquesmaterials" class="section-anchor"></div>
      <h2 id="object-materials-techniques-heading">Object Types, Techniques and Materials</h2>

      <div id="objectTypeContainer">
        <h3>Object types by gender</h3>
        <canvas id="objectTypeChart" height="400" role="img"
          aria-label="Stacked bar chart showing object types by gender across all years"></canvas>
        <h3>Gender distribution within each object type (%)</h3>
        <canvas id="objectTypeChartPercent" height="400" role="img"
          aria-label="100% stacked bar chart showing gender percentages within each object type"></canvas>
      </div>

      <div id="techniquesContainer">
        <h3>Techniques by gender</h3>
        <canvas id="techniquesChart" height="400" role="img"
          aria-label="Stacked bar chart showing art techniques by gender"></canvas>
        <h3>Gender distribution within each technique (%)</h3>
        <canvas id="techniquesChartPercent" height="400" role="img"
          aria-label="100% stacked bar chart showing gender percentages within each technique"></canvas>
      </div>

      <div id="materialsContainer">
        <h3>Materials by gender</h3>
        <canvas id="materialsChart" height="400" role="img"
          aria-label="Stacked bar chart showing materials used by gender"></canvas>
        <h3>Gender distribution within each material (%)</h3>
        <canvas id="materialsChartPercent" height="400" role="img"
          aria-label="100% stacked bar chart showing gender percentages within each material"></canvas>
      </div>
    </section>

    <section aria-labelledby="creator-depicted-heading">
      <div id="creatordepicted" class="section-anchor"></div>
      <div id="creatorDepictedContainer">
        <h2 id="creator-depicted-heading">Who depicts whom? Creator vs depicted gender</h2>
        <div class="insight-box">
          <p>This chart explores the relationship between artist gender and the gender of people
          depicted in portraits and figural works. Do male artists predominantly depict men or women? What about female
          artists? Note: This analysis is based on ~1-3% of the collection where depicted persons are identified in the
          metadata.</p>
        </div>
        <canvas id="creatorDepictedChart" height="250" role="img"
          aria-label="Horizontal stacked bar chart showing gender of depicted persons by creator gender"></canvas>
      </div>
      <div id="creatorDepictedInsight" class="insight-box" style="display:none;" role="complementary"></div>
    </section>

    <section class="section-exhibitions" aria-labelledby="exhibitions-heading">
      <div id="exhibitions" class="section-anchor"></div>
      <h2 id="exhibitions-heading">Exhibitions by Gender</h2>

      <!-- Tab Navigation -->
      <div class="tab-container" role="tablist">
        <button class="tab-button active" data-tab="exhAllYears" role="tab" aria-selected="true"
          aria-controls="exhAllYears-panel">All Years</button>
        <button class="tab-button" data-tab="exhRecent" role="tab" aria-selected="false"
          aria-controls="exhRecent-panel">2000–2025</button>
      </div>

      <!-- All Years Tab Content -->
      <div id="exhAllYears-panel" class="tab-panel active" role="tabpanel" aria-labelledby="exhAllYears">
        <div id="exhibitionContainer">
          <canvas id="exhibitionChart" height="400" role="img"
            aria-label="Bar chart showing exhibition statistics by gender"></canvas>
        </div>
        <div id="exhibitionInsight" class="insight-box" style="display:none;" role="complementary"></div>
      </div>

      <!-- Recent Years Tab Content -->
      <div id="exhRecent-panel" class="tab-panel" role="tabpanel" aria-labelledby="exhRecent">
        <div id="exhibitionContainer2000">
          <canvas id="exhibitionChart2000" height="400" role="img"
            aria-label="Bar chart showing exhibition statistics by gender for recent acquisitions"></canvas>
        </div>
        <div id="exhibitionInsight2000" class="insight-box" style="display:none;" role="complementary"></div>
      </div>
    </section>

    <section class="section-display" aria-labelledby="display-heading">
      <div id="display" class="section-anchor"></div>
      <div id="onDisplayContainer">
        <h2 id="display-heading">Currently on display by gender</h2>
        <div class="insight-box">
          <p>This chart shows what percentage of artworks are currently on display versus not on
          display for each gender. Each bar represents 100% of the works for that gender, making it easy to compare
          display rates.</p>
        </div>
        <canvas id="onDisplayChart" height="250" role="img"
          aria-label="Horizontal stacked bar chart showing display status percentages by gender"></canvas>
      </div>
      <div id="onDisplayInsight" class="insight-box" style="display:none;" role="complementary"></div>
    </section>

    <section aria-labelledby="display-timeline-heading">
      <div id="displayDistributionTimelineContainer">
        <h2 id="display-timeline-heading">Display rate over time by gender</h2>
        <div class="insight-box">
          <p>This chart shows what percentage of artworks from each acquisition year are currently on
          display, broken down by gender. It reveals which historical periods have higher representation in current
          exhibitions.</p>
        </div>
        <canvas id="displayDistributionTimeline" height="400" role="img"
          aria-label="Line chart showing display rates by acquisition year and gender"></canvas>
      </div>
    </section>

    <section class="section-dimensions" aria-labelledby="dimensions-heading">
      <div id="dimensions" class="section-anchor"></div>
      <div id="dimensionsContainer">
        <h2 id="dimensions-heading">Physical Dimensions: Size and Prominence</h2>
        <div class="insight-box">
          <p>Do works by male artists tend to be physically larger? Physical size has historically
          been a proxy for perceived importance in art collections—large-scale works often receive more prominent
          display locations and command greater attention. This analysis examines paintings in the collection to test
          whether there are systematic differences in dimensions by creator gender.</p>
        </div>

        <h3>Average Dimensions of Paintings</h3>
        <canvas id="dimensionChart" height="300" role="img"
          aria-label="Grouped bar chart comparing average height, width, and area of paintings by gender"></canvas>

        <h3>Size Distribution (Area in cm²)</h3>
        <div class="insight-box">
          <p>This chart shows the percentage of paintings in each size category by gender. It reveals
          whether one gender's works are concentrated in smaller or larger size ranges.</p>
        </div>
        <canvas id="areaDistributionChart" height="350" role="img"
          aria-label="Line chart showing distribution of painting sizes by gender"></canvas>
      </div>
      <div id="dimensionsInsight" class="insight-box" style="display:none;" role="complementary"></div>
    </section>

  </main>

  <!-- Chart.js library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"
    integrity="sha384-FcQlsUOd0TJjROrBxhJdUhXTUgNJQxTMcxZe6nHbaEfFL1zjQ+bq/uRoBQxb0KMo"
    crossorigin="anonymous"></script>

  <!-- D3.js for world map visualization -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/topojson-client@3.1.0/dist/topojson-client.min.js"></script>

  <!-- Application entry point (ES6 modules) -->
  <script type="module" src="src/js/main.js"></script>
</body>

</html>